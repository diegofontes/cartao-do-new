{% load static %}
{% load currency %}
<section class="card">
  <div class="row" style="justify-content:space-between;align-items:center;margin-bottom:var(--space-3)">
    <h3 style="margin:0">Opções: {{ service.name }}</h3>
    <a hx-get="{% url 'scheduling:option_form_new' card.id service.id %}"
       hx-target="#options-form" class="btn">
       <svg aria-hidden="true" width="16" height="16"><use href="{% static 'ui/icons.svg' %}#icon-plus"></use></svg>
       Nova opção
    </a>
  </div>
  <ul class="grid" style="grid-template-columns:1fr;gap:10px">
    {% for it in items %}
      <li style="border:1px solid var(--border);border-radius:10px;padding:10px 12px;background:var(--bg)">
        <div class="row" style="justify-content:space-between;align-items:center">
          <div>
            <div class="font-medium">{{ it.name }}</div>
            <div class="muted" style="font-size:12px">
              {% if it.price_delta_cents %}+{{ it.price_delta_cents|brl_cents }}{% else %}Sem alteração de preço{% endif %}
              {% if it.extra_duration_minutes %} • +{{ it.extra_duration_minutes }} min{% endif %}
              {% if not it.is_active %} • inativa{% endif %}
            </div>
            {% if it.description %}
              <p class="muted" style="margin:4px 0 0;font-size:12px">{{ it.description }}</p>
            {% endif %}
          </div>
          <div class="row" style="gap:10px">
            <a hx-get="{% url 'scheduling:option_form_edit' card.id service.id it.id %}" hx-target="#options-form" class="btn ghost">Editar</a>
            <button hx-post="{% url 'scheduling:option_delete' card.id service.id it.id %}"
                    hx-confirm="Confirmar exclusão desta opção?"
                    hx-target="#options"
                    class="btn ghost">Excluir</button>
          </div>
        </div>
      </li>
    {% empty %}
      <li class="muted">Nenhuma opção cadastrada.</li>
    {% endfor %}
  </ul>
  <div id="options-form" style="margin-top:var(--space-4)"></div>
</section>
