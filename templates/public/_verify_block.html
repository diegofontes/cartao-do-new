<div id="verify-block">
  {% if error %}
    <div class="error" role="alert">{{ error }}</div>
    <button type="button" class="btn" id="resend"
            hx-post="{% url 'public_send_code' card.nickname service.id %}"
            hx-include="#booking-form"
            hx-target="#verify-block" hx-swap="outerHTML">Reenviar</button>
  {% elif verified %}
    <div class="help">
      Telefone verificado ✅</div>
    <input type="hidden" name="phone_verified" value="1">
    <div hx-post="{% url 'public_validate_booking' card.nickname service.id %}"
         hx-include="#booking-form"
         hx-target="#dlg-footer" hx-swap="outerHTML" hx-trigger="load"></div>
  {% else %}
    <p class="help">Enviamos um código por SMS. (modo dev: código foi impresso no terminal)</p>
    <input class="input" name="code" maxlength="6" placeholder="Código de 6 dígitos" inputmode="numeric" required>
    <div class="row" style="gap:12px;margin-top:8px;display:flex">
      <button class="btn primary"
              hx-post="{% url 'public_verify_code' card.nickname service.id %}"
              hx-include="#booking-form"
              hx-target="#verify-block" hx-swap="outerHTML">Validar código</button>
      <button type="button" class="btn" id="resend"
              hx-post="{% url 'public_send_code' card.nickname service.id %}"
              hx-include="#booking-form"
              hx-target="#verify-block" hx-swap="outerHTML">Reenviar</button>
    </div>
  {% endif %}
</div>
