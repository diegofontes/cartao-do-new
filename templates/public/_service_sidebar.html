<div class="slideover" role="dialog" aria-modal="true" aria-labelledby="svc-title">
  <header class="slideover-header">
    <div class="row" style="justify-content:space-between;align-items:center">
      <div>
        <h2 id="svc-title" class="title" style="font-size:1.25rem;margin:0">{{ service.name }}</h2>
        <p class="help">{{ service.type }} • {{ service.duration_minutes }}min • {{ service.timezone }}</p>
      </div>
      <button class="btn" data-close-slideover aria-label="Fechar">✕</button>
    </div>
  </header>
  <div class="slideover-body">
    <form id="booking-form"
          hx-post="{% url 'public_validate_booking' card.nickname service.id %}"
          hx-trigger="change from:#booking-form, keyup changed delay:1000ms"
          hx-target="#dlg-footer" hx-swap="outerHTML"
          class="grid" style="grid-template-columns:1fr 1fr;gap:12px">
      {% csrf_token %}
      <input type="hidden" name="service" value="{{ service.id }}" />
      <label class="field" style="grid-column:1/-1"><span>Nome</span>
        <input class="input" name="name" required />
      </label>
      <label class="field" style="grid-column:1/-1"><span>E-mail (opcional)</span>
        <input class="input" type="email" name="email" />
      </label>
      <fieldset class="box" style="grid-column:1/-1">
        <label class="field"><span>Telefone (BR/E.164)</span>
          <input class="input" name="phone" id="phone" inputmode="tel" placeholder="+55 11 9XXXX-XXXX" required />
        </label>
        <div id="verify-block"
             hx-post="{% url 'public_send_code' card.nickname service.id %}"
             hx-trigger="click from:#send-sms"
             hx-include="#booking-form"
             hx-target="#verify-block" hx-swap="outerHTML">
          <button type="button" id="send-sms" class="btn">Enviar código</button>
        </div>
      </fieldset>
      <label class="field" style="grid-column:1/-1"><span>Data</span>
        <input class="input" type="date" name="date"
               hx-get="{% url 'public_slots' card.nickname %}?service={{ service.id }}"
               hx-target="#slots" hx-swap="innerHTML" />
      </label>
      <div id="slots" class="grid" style="grid-column:1/-1;grid-template-columns:1fr;gap:8px"></div>
    </form>
  </div>
  <div id="dlg-footer" class="slideover-footer">
    {% include 'public/_footer.html' with form_valid=False nickname=card.nickname service_id=service.id %}
  </div>
</div>
